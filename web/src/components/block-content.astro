---
import blocksToHtml from '@sanity/block-content-to-html';

export interface Props {
  blocks: any[];
}

const { blocks } = Astro.props as Props;
const h = blocksToHtml.h;
const serializers = {
  container({ children }) {
    return h('div', { className: '[ block-content ] [ stack ]' }, children);
  },
  marks: {
    link({ children, mark }: any) {
      return h(
        'a',
        {
          href: mark.url,
          rel: 'noreferrer',
          target: '_blank',
        },
        children,
      );
    },
  },
  types: {
    block(properties) {
      properties.children = h('span', { className: 'backlit' }, properties.children);
      properties.serializers = blocksToHtml.defaultSerializers;
      return blocksToHtml.defaultSerializers.block(properties);
    },
  },
};

const html = blocks ? blocksToHtml({ blocks, serializers }) : null;
---

<Fragment set:html={html} />

<style>
  :global(.block-content) {
    word-wrap: anywhere;
  }
</style>
